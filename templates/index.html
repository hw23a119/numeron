<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>数当てゲーム</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <h2>数当てゲーム</h2>

        <!-- EAT/BITEの説明 -->
        <div class="explain">
            <strong>EAT</strong>：位置と数字が両方合っている<br>
            <strong>BITE</strong>：数字は合っているが位置が違う
        </div>

        {% if last_answer %}
        <p class="last-answer" style="margin:0 0 10px 0; color:#2b8a3e;">✅ 前回の答え：{{ last_answer }}</p>
        {% endif %}

        <form method="POST" class="game-form" autocomplete="off">
            <input type="tel" name="guess" placeholder="3桁の数字を入力（例: 523）" maxlength="3" inputmode="numeric"
                pattern="[0-9]*" required>
            <button type="submit" class="btn btn-judge">判定する</button>
            <a href="/reset" class="reset-link">
                <div class="btn btn-reset">🔄 リセット（今回の答えを表示して新しいゲーム）</div>
            </a>
        </form>

        <div class="result">{{ result }}</div>

        <div class="history-box">
            <h3 style="margin:10px 0 8px 0;">履歴（最新 5件）</h3>
            {% for item in history %}
            <div class="history-item">
                <div class="history-left">{{ item.guess }}</div>
                <div class="history-right">{{ item.eat }} EAT / {{ item.bite }} BITE</div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>

</html>